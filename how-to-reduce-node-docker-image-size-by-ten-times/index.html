<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><meta name="generator" content="Gatsby 5.13.3"/><meta data-react-helmet="true" name="description" content="Reduce Node Docker Image Size by Ten Times."/><meta data-react-helmet="true" property="og:title" content="How to Reduce Node Docker Image Size by 10X"/><meta data-react-helmet="true" property="og:description" content="Reduce Node Docker Image Size by Ten Times."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url" content="https://itsopensource.com/how-to-reduce-node-docker-image-size-by-ten-times/"/><meta data-react-helmet="true" property="og:image" content="https://itsopensource.com/featured-images/docker.png"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@idkhtml"/><meta data-react-helmet="true" name="twitter:title" content="How to Reduce Node Docker Image Size by 10X"/><meta data-react-helmet="true" name="twitter:description" content="Reduce Node Docker Image Size by Ten Times."/><meta data-react-helmet="true" name="twitter:image" content="https://itsopensource.com/featured-images/docker.png"/><style data-href="/styles.375aaab53cbd21271600.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#073642}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{background:#eee8d5;color:#657b83}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.tags{margin-bottom:10px}.tags .tag{background:#f8f8f8;box-shadow:none;margin-right:10px;padding:4px 7px}.gatsby-highlight[data-language]{position:relative}.gatsby-highlight[data-language] pre{background:#f4f4f9;padding-top:1.5em}.gatsby-highlight[data-language]:before{background:#d9d7e0;border-radius:0 0 4px 4px;color:#444;content:attr(data-language);font-size:10px;left:1em;line-height:1;padding:4px 7px;position:absolute;text-align:right;text-transform:uppercase;top:0}.gatsby-highlight[data-language=javascript]:before{background:#f7df1e none repeat scroll 0 0}</style><link rel="alternate" type="application/rss+xml" title="itsopensource RSS Feed" href="/rss.xml"/><title data-react-helmet="true">How to Reduce Node Docker Image Size by 10X | itsopensource</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="24x24" href="/opensource_24.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/opensource_32.png"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">itsopensource</a></h3></header><main><article><header><h1 style="margin-top:1.75rem;margin-bottom:0">How to Reduce Node Docker Image Size by 10X</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">July 03, 2020</p></header><div class="tags"><a class="tag" href="/tags/docker/">docker</a><a class="tag" href="/tags/tricks/">tricks</a><a class="tag" href="/tags/how-to/">how-to</a></div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;margin-bottom:20px"><div aria-hidden="true" style="width:100%;padding-bottom:85.5%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADIklEQVR42q1Ue0hTURg/y3sedxX+kUUERhQYQQQVkVRgBNHjj0pipNADIqx2H6tVaCC7RjpXKkZFy/K1Xa8bNxoWmFGoGIWszJIKgh5UlkSZPTBK5nY6d1u2MY3+6IOP73LOd37f73zf71wAJjRqArqeFnVFmQT+jzFQZpP3eWfg47criaM9P7bM1pVO7vf+P+CwxCMtU9GRtvlEvjobH7yynpx9TbHrgT+6r9O0WDTYG8B/s4IaaARy9EYOKQuGibPnB3b2fCeVjyk+dkeN5ihXM7CjvQwUBaYl3iTV4r0ijg6FHQ6SsrsR4rwXweU9YXKil+LS7jfI0eVBha1bifvdKHH11qGj17eAgzofRzCl9Ivsr89kiU/J6eeUlN8L8S4G5rofxszJyT5Kqp6M4uKb1eTsq/fmhi8UH+8OgmwLn8o03hdcFnTydUOUuPt/mt1vI+jcQISwyLv7DQ+Tc/0jPAMiZ14OIbu+CRzyTh6H3R9AUtK5g/cM07S6ryFw/hPNDbyhMxoHKar9RPnajxG+4WvI2CfFHUqsTdGhmMafrGH5Soa54tGLub7PdGPLQHiJ/32E1A5SBkTN2kiYb/xGUUmXB4AcDijU8Ik1ajFkwGyW3bP41I2HDz4MDkWq+4Yj6RfYtU89C7He9sKitvwkAhNaDqNuMQDjidlVfJYSWHVIu5W3qLx1KyjwzUuoHNOfoYoxLSa+pjhtvLdhDmf1Lo8RiAPHpcSJ/pVA0qcnszPieExZxTSxeQ084C+F9ku7OZt3ORS0vGgRQV2NpKbN0H75GJQvLYKythRY9ZlIbs7F+7W5UPYvhLK6Cwm+rDE8KPq2IbFJZgcPQ8l3BUvNApbU3VDUqpGkOojkXQHFpiokql1I1CxQ0ipZbj1zlQFe42TNSuy+zDFALDftg6KajwR1E0sOsO/tWPCuZSABjhWZUlCTwZg7keRrZGvbGLuLSNIaoKSWQJteAQr19GRhs6eDRdXKWO0Bio6I6N2JBM3G3rUZyWqu8c1usAEIgWlY0NYhm2cBJ2oiJ6vLoj236lP+Nm9TijYTp5vye0vO+QUkEGcUSqheawAAAABJRU5ErkJggg==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/ab093c5a31feb4bf8a49b9452fb5be09/69585/docker.png 200w,
/static/ab093c5a31feb4bf8a49b9452fb5be09/7b9fb/docker.png 336w" sizes="(max-width: 336px) 100vw, 336px" /><img loading="lazy" sizes="(max-width: 336px) 100vw, 336px" srcset="/static/ab093c5a31feb4bf8a49b9452fb5be09/69585/docker.png 200w,
/static/ab093c5a31feb4bf8a49b9452fb5be09/7b9fb/docker.png 336w" src="/static/ab093c5a31feb4bf8a49b9452fb5be09/7b9fb/docker.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><section><p>Dockerizing an application is simple, effective, but optimizing the size of Docker Image is the tricky part. Docker is easy to use but once the application starts scaling, the image size inflates exponentially. In general, the node docker image size of the applications is over 1 GB most of the time.</p>
<h3>Why the Size matters</h3>
<ol>
<li>
<p>Large docker image sizes - Bigger image size requires more space means increased expense.</p>
</li>
<li>
<p>Long build durations - It takes a longer time to push the images over the network and results in CI Pipeline delays.</p>
</li>
</ol>
<h3>Let’s Start The Optimization</h3>
<p>Here is our <a href="https://github.com/championshuttler/fluentbit-dashboard">demo application</a> built using the VueJS Application.</p>
<p>Here is the initial Dockerfile.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">FROM node:10

WORKDIR /app

COPY <span class="token builtin class-name">.</span> /app

EXPOSE <span class="token number">8080</span>

RUN <span class="token function">npm</span> <span class="token function">install</span> http-server <span class="token parameter variable">-g</span>

RUN <span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> run build

CMD http-server ./dist</code></pre></div>
<p>The size of this image is:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1aba1e73be853f41e369a610752fa9ab/af975/docker1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 7.4324324324324325%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPklEQVR42h2Kyw3AMAxCjb/3Sq1UZabsPw6JfUDAA3n/zfU9hAihGKnqKCIIgHI3M2NVDevu7szM8f50bn4AVSsVPisnAckAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="docker1"
        title=""
        src="/static/1aba1e73be853f41e369a610752fa9ab/fcda8/docker1.png"
        srcset="/static/1aba1e73be853f41e369a610752fa9ab/12f09/docker1.png 148w,
/static/1aba1e73be853f41e369a610752fa9ab/e4a3f/docker1.png 295w,
/static/1aba1e73be853f41e369a610752fa9ab/fcda8/docker1.png 590w,
/static/1aba1e73be853f41e369a610752fa9ab/efc66/docker1.png 885w,
/static/1aba1e73be853f41e369a610752fa9ab/c83ae/docker1.png 1180w,
/static/1aba1e73be853f41e369a610752fa9ab/af975/docker1.png 2478w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>It is 1.34GB! Whoops!</p>
<p>Let’s start optimizing step by step</p>
<ol>
<li>Use <strong>Multi-Stage</strong> Docker Builds</li>
</ol>
<p>Multi-stage builds make it easy to optimize Docker images by using multiple <strong>intermediate</strong> images in a single Dockerfile. Read more about it <a href="https://docs.docker.com/develop/develop-images/multistage-build/">here</a>. By using multi-stage builds, we can install all dependencies in the build image and copy them to the leaner runtime image.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">FROM node:10 AS BUILD_IMAGE

WORKDIR /app

COPY <span class="token builtin class-name">.</span> /app

EXPOSE <span class="token number">8080</span>

RUN <span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> run build

FROM node:10

WORKDIR /app

<span class="token comment"># copy from build image</span>
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>BUILD_IMAGE /app/dist ./dist
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>BUILD_IMAGE /app/node_modules ./node_modules

RUN <span class="token function">npm</span> i <span class="token parameter variable">-g</span> http-server

CMD http-server ./dist</code></pre></div>
<p>Now the size of this image is 1.24GB:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/6b9b07919be16cc2c5c399f5e2e6e50a/ab387/docker2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 6.081081081081082%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAP0lEQVR42jWKuQnAQBADd71/cFxmcDPuvyudETgQmhGS+3mxV6CqcaV+XehuZCZUFSLCbWboZkZ2d3JE8PPnAFreFVdgwVNZAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="docker2"
        title=""
        src="/static/6b9b07919be16cc2c5c399f5e2e6e50a/fcda8/docker2.png"
        srcset="/static/6b9b07919be16cc2c5c399f5e2e6e50a/12f09/docker2.png 148w,
/static/6b9b07919be16cc2c5c399f5e2e6e50a/e4a3f/docker2.png 295w,
/static/6b9b07919be16cc2c5c399f5e2e6e50a/fcda8/docker2.png 590w,
/static/6b9b07919be16cc2c5c399f5e2e6e50a/efc66/docker2.png 885w,
/static/6b9b07919be16cc2c5c399f5e2e6e50a/c83ae/docker2.png 1180w,
/static/6b9b07919be16cc2c5c399f5e2e6e50a/ab387/docker2.png 2812w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<ol start="2">
<li>Remove Development Dependencies and use <strong>Node Prune</strong> Tool</li>
</ol>
<p>node-prune is an open-source tool for removing unnecessary files from the node_modules folder. Test files, markdown files, typing files and *.map files in Npm packages are not required at all in the production environment generally, most of the developers do not remove them from the production package. By using node-prune it can safely be removed.</p>
<p>We can use this to remove Development Dependencies:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> prune <span class="token parameter variable">--production</span></code></pre></div>
<p>After making these changes <code class="language-text">Dockerfile</code> will look like:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">FROM node:10 AS BUILD_IMAGE

RUN <span class="token function">curl</span> <span class="token parameter variable">-sfL</span> https://install.goreleaser.com/github.com/tj/node-prune.sh <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> -- <span class="token parameter variable">-b</span> /usr/local/bin

WORKDIR /app

COPY <span class="token builtin class-name">.</span> /app

EXPOSE <span class="token number">8080</span>

RUN <span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> run build

<span class="token comment"># remove development dependencies</span>
RUN <span class="token function">npm</span> prune <span class="token parameter variable">--production</span>

<span class="token comment"># run node prune</span>
RUN /usr/local/bin/node-prune

FROM node:10

WORKDIR /app

<span class="token comment"># copy from build image</span>
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>BUILD_IMAGE /app/dist ./dist
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>BUILD_IMAGE /app/node_modules ./node_modules

RUN <span class="token function">npm</span> i <span class="token parameter variable">-g</span> http-server

CMD http-server ./dist</code></pre></div>
<p>By using this we reduced the overall size to 1.09GB</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/154740192b6235545546d6108aac8035/045f9/docker3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 8.783783783783782%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAWklEQVR42j2NQQrAMAgE1SQqQdv+/7NbI7SHgXFllZ7bkXFBXLBilicyE2bWEFEz5+w8ItpPdvZ7b6hqz+4OUmEwC4irKFTOzRjjLx5EBFZFrSPHvydrreabX0alKhP/S1UEAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="docker3"
        title=""
        src="/static/154740192b6235545546d6108aac8035/fcda8/docker3.png"
        srcset="/static/154740192b6235545546d6108aac8035/12f09/docker3.png 148w,
/static/154740192b6235545546d6108aac8035/e4a3f/docker3.png 295w,
/static/154740192b6235545546d6108aac8035/fcda8/docker3.png 590w,
/static/154740192b6235545546d6108aac8035/efc66/docker3.png 885w,
/static/154740192b6235545546d6108aac8035/c83ae/docker3.png 1180w,
/static/154740192b6235545546d6108aac8035/045f9/docker3.png 2350w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<ol start="3">
<li>Choose <strong>Smaller Final Base Image</strong></li>
</ol>
<p>When dockerizing a node application, there are lots of <a href="https://hub.docker.com/_/node/">base images</a> available to choose from.</p>
<p>Here we will use <strong>alpine</strong> image; alpine is a lean docker image with minimum packages but enough to run node applications.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">FROM node:10 AS BUILD_IMAGE

RUN <span class="token function">curl</span> <span class="token parameter variable">-sfL</span> https://install.goreleaser.com/github.com/tj/node-prune.sh <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> -- <span class="token parameter variable">-b</span> /usr/local/bin

WORKDIR /app

COPY <span class="token builtin class-name">.</span> /app

EXPOSE <span class="token number">8080</span>

RUN <span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> run build

<span class="token comment"># remove development dependencies</span>
RUN <span class="token function">npm</span> prune <span class="token parameter variable">--production</span>

<span class="token comment"># run node prune</span>
RUN /usr/local/bin/node-prune

FROM node:10-alpine

WORKDIR /app

<span class="token comment"># copy from build image</span>
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>BUILD_IMAGE /app/dist ./dist
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>BUILD_IMAGE /app/node_modules ./node_modules

RUN <span class="token function">npm</span> i <span class="token parameter variable">-g</span> http-server

CMD http-server ./dist</code></pre></div>
<p>By using this <code class="language-text">Dockerfile</code> the image size dropped to <code class="language-text">157MB</code> \o/</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5b1ac48790d94a09ececf55a1e75372c/e3261/docker4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 8.783783783783782%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAVElEQVR42l2MUQrAMAhDtcVWqhPvf9kMy1bYPh7ERyJlGC4PsBLEBXEFIgKqirUWiGjTWoOZITOPn3PC3bcfY4CZQfwM/tSD3vvH1S0ix7+donL1blPEKgSTWx3AAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="docker4"
        title=""
        src="/static/5b1ac48790d94a09ececf55a1e75372c/fcda8/docker4.png"
        srcset="/static/5b1ac48790d94a09ececf55a1e75372c/12f09/docker4.png 148w,
/static/5b1ac48790d94a09ececf55a1e75372c/e4a3f/docker4.png 295w,
/static/5b1ac48790d94a09ececf55a1e75372c/fcda8/docker4.png 590w,
/static/5b1ac48790d94a09ececf55a1e75372c/efc66/docker4.png 885w,
/static/5b1ac48790d94a09ececf55a1e75372c/c83ae/docker4.png 1180w,
/static/5b1ac48790d94a09ececf55a1e75372c/e3261/docker4.png 2324w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h3>Conclusion</h3>
<p>By applying these 3 simple steps, we reduced our docker image size by 10 times.</p>
<p>Cheers!</p></section><hr style="margin-bottom:1.75rem"/><footer><div style="display:flex;margin-bottom:4.375rem"><a style="min-width:50px;min-height:50px;margin-right:0.875rem;margin-bottom:0;overflow:hidden;box-shadow:none" href="/author/shivam/"><img alt="Shivam Singhal" style="width:50px;height:auto;border-radius:100%" src="/shivam.jpg"/></a><p><strong>Shivam Singhal</strong> <!-- --> is a full stack developer, Linux Guy, Mozillian by ❤️<!-- -->.<br/><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/idkhtml">@<!-- -->idkhtml</a></p></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/how-to-format-browser-console/">← <!-- -->How to use console command effectively</a></li><li><a rel="next" href="/how-to-call-a-function-on-URL-change-in-javascript/">How to call a function on URL change in javascript<!-- --> →</a></li></ul></nav></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/how-to-reduce-node-docker-image-size-by-ten-times/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-20236a47ecc0cfcc3ad4.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-8d6eedf26dff23349457.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-1e6eb6bae1937612ce42.js\"],\"component---src-templates-author-js\":[\"/component---src-templates-author-js-42abc0e349e85307f2d1.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-568e11d7fbeaaa821234.js\"],\"component---src-templates-tag-js\":[\"/component---src-templates-tag-js-fcd6af40c0e70cbb191b.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="d62a4e027fd09787480b";</script><script src="/webpack-runtime-04ade536fd121ad8ed7c.js" async></script><script src="/framework-b14ce0c62450bc68efcc.js" async></script><script src="/app-20236a47ecc0cfcc3ad4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body><script>
            const ts = Date.now().toString();
            const sendTelemetry = () => {
              // avoid localhost hits
              if (window.location.href.includes("localhost")) return;
              // Analytics
              let query = "v=1";
              query += "&tid=UA-155141542-1"; // tracking ID
              query += "&cid=" + ts; // client ID -> faking as timestamp
              if (document.referrer) query += "&dr="+ encodeURIComponent(document.referrer);
              query += "&ds=web"; // event from
              query += "&aip=1"; //anonymize IP
              query += "&z=" + ts; //to avoid caching of data
              query += "&ul=" + navigator.language;
              query += "&ua=" + encodeURIComponent(navigator.userAgent);
              query += "&dl=" + encodeURIComponent(document.location.origin + document.location.pathname);
              // query += "&dh=" + encodeURIComponent(document.location.origin);
              // query += "&dp=" + encodeURIComponent(document.location.pathname);
              query += "&t=pageview"; //event type
              const request = new XMLHttpRequest();
              request.open("POST", "https://www.google-analytics.com/collect", true);
              request.send(query);
            };

            // Send for the current page
            sendTelemetry();
            // hook pushState function to call sendTelemetry everytime something is pushed in history
            (function(history){
              var pushState = history.pushState;
              history.pushState = function(state) {
                sendTelemetry();
                return pushState.apply(history, arguments);
              };
            })(window.history);
          </script></html>