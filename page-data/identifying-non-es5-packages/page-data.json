{"componentChunkName":"component---src-templates-blog-post-js","path":"/identifying-non-es5-packages/","result":{"data":{"site":{"siteMetadata":{"title":"itsopensource"}},"markdownRemark":{"id":"b1e7d843-e1ae-5a2f-9c2a-f4f326a92c99","excerpt":"To the delight of Frontend developers around the globe, Microsoft finally decided to kill its dreaded browser Internet explorer. But it’s not done yet, and…","html":"<p>To the delight of Frontend developers around the globe, Microsoft finally decided to kill its dreaded browser Internet explorer. But it’s not done yet, and still we need to support IE in  our Frontend builds, due to which almost all our JS bundles are transpiled in ES5 formats.<br>\nWe generally exclude all the node modules from the transpilation process as we believe all the npm packages serve ES5 packages, which is not true for every package (learned that hard way ☹️).  </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    test<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(ts|tsx|js)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n    loader<span class=\"token operator\">:</span> <span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span>\n    exclude<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>For example, I am working with an e-commerce app and we have to support IE11 atleast for this app, one fine day our app stopped working on IE and we spent almost 2 days figuring out what’s wrong. Turned out a developer introduced new state management library <code class=\"language-text\">recoil</code>, which is an amazing tool. But, it does not serve ES5 build. This broke our application on IE.<br>\nTo fix this all we need to do is, not exclude these packages from our transpilation and done.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    test<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(ts|tsx|js)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n    loader<span class=\"token operator\">:</span> <span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">,</span>\n    exclude<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\/]node_modules[\\\\/](?!(config|recoil)[\\\\/])</span><span class=\"token regex-delimiter\">/</span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>But still, we need to find manually which packages are not being served as ES5. While figuring out this problem I stumbled upon an amazing tool that automatically identifies all non-ES5 packages for us in the node modules <a href=\"https://www.npmjs.com/package/are-you-es5\">are-you-es5</a>. And in bonus, it provides a regex to exclude these packages from our excluding node modules from transpilation. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1f5e67550b529ed51552a737e5ab0270/d30ee/are-you-es5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.54054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAs2AAALNgG/CNh6AAABCklEQVQY05WRy0rEQBBFO8l0T57dST8r6UxIIjHu5gvciTAwa1euRgb0E9wKrvxpi/gACQqexaWrqLpFVZOouKHmRNSZqAdSPgbtkR1ofBvTAw1VuKGb+Is0TVHzPGeMhQvEzycxPvOLF3X1qi7f5P4J7h3cGTg72EMmUs55WZZSStQsy5RSqNgfRRE5crbTbOzLFgqwbAeiU53jbku2CU2CICB/cM0SK7WrWyEkF1Iba8BWqvouCFaQf/FrT+O9MQYXq+saT4KLYSiEsNZqrdcWP4zahWEY5nkex3Gapr7v0ehDvffOObuAXtVCURSfzQCAo7CiaZqu61DxjbfFPFZjiFfFX0FdT34HE94bi7FtCg0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"usage\"\n        title=\"usage\"\n        src=\"/static/1f5e67550b529ed51552a737e5ab0270/fcda8/are-you-es5.png\"\n        srcset=\"/static/1f5e67550b529ed51552a737e5ab0270/12f09/are-you-es5.png 148w,\n/static/1f5e67550b529ed51552a737e5ab0270/e4a3f/are-you-es5.png 295w,\n/static/1f5e67550b529ed51552a737e5ab0270/fcda8/are-you-es5.png 590w,\n/static/1f5e67550b529ed51552a737e5ab0270/efc66/are-you-es5.png 885w,\n/static/1f5e67550b529ed51552a737e5ab0270/d30ee/are-you-es5.png 980w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Identifying non ES5 packages","tags":["javascript","bundling","es5"],"date":"August 15, 2021","description":null,"author":"trishul","featuredImage":null}}},"pageContext":{"slug":"/identifying-non-es5-packages/","previous":{"fields":{"slug":"/readabilityjs-adding-reader-view/"},"frontmatter":{"author":"trishul","tags":["accessibility","javascript","firefox"],"title":"ReadabilityJS - adding Reader View Mode to websites"}},"next":{"fields":{"slug":"/how-to-switch-namespace-in-kubernetes/"},"frontmatter":{"author":"shivam","tags":["devops","kubernetes","how-to"],"title":"How to Switch Namespaces in Kubernetes"}}}},"staticQueryHashes":["4268877247","764694655"]}